{"ast":null,"code":"import axios from \"axios\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  data() {\n    return {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      telNumber: \"\",\n      password: \"\",\n      rolesText: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters({\n      showUserAddForm: \"showUserAddForm\",\n      updatedUser: \"updatedUser\",\n      updatedUserIndex: \"updatedUserIndex\",\n      roles: \"roles\"\n    })\n  },\n  methods: {\n    unShowAddUserForm() {\n      const userFormContainer = this.$refs.userFormContainer;\n\n      // Remove all classes from the element\n      userFormContainer.className = \"user-form-container-unshow\";\n\n      // After a delay of 1.25 seconds, toggle the Vuex state to false\n      setTimeout(() => {\n        this.$store.commit(\"toggleUserAddForm\", false);\n        this.$store.commit(\"setUpdatedUser\", null);\n        this.$store.commit(\"setUpdatedUserIndex\", null);\n      }, 1250);\n    },\n    async addUser() {\n      const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      const telPattern = /^\\d{10}$/;\n      let error = \"\";\n      switch (true) {\n        case this.firstName.length === 0:\n        case this.lastName.length === 0:\n        case this.email.length === 0:\n        case this.telNumber.length === 0:\n        case this.password.length === 0:\n          error = \"Please fill all fields in the form\";\n          break;\n        case !emailPattern.test(this.email):\n          error = \"Please enter a valid email address\";\n          break;\n        case !telPattern.test(this.telNumber):\n          error = \"Please enter a valid telephone number\";\n          break;\n        case this.password.length < 8:\n          error = \"Password should be at least 8 characters long\";\n          break;\n      }\n      if (error) {\n        this.$store.commit(\"showModal\", error);\n        return;\n      }\n      const userDto = {\n        firstName: this.firstName,\n        lastName: this.lastName,\n        email: this.email,\n        telNumber: this.telNumber,\n        password: this.password\n      };\n      try {\n        const response = await axios.post(\"http://localhost:5000/user/user-create\", userDto, {\n          withCredentials: true\n        });\n        console.log(response.data);\n        if (response.data.error) {\n          this.$store.commit(\"showModal\", response.data.error);\n          return;\n        }\n        this.unShowAddUserForm();\n        this.$store.dispatch(\"openInfoPopUp\", \"User created\");\n        this.$store.commit(\"addUser\", response.data);\n      } catch (error) {\n        console.log(error);\n        this.$store.commit(\"showModal\", \"Something went wrong we are working on the repair\");\n      }\n    }\n  },\n  mounted() {\n    if (this.updatedUser != null) {\n      this.firstName = this.updatedUser.first_name;\n      this.lastName = this.updatedUser.last_name;\n      this.email = this.updatedUser.email;\n      this.telNumber = this.updatedUser.tel_number;\n      if (this.roles.length === 0) {\n        this.$store.dispatch(\"getRoles\");\n      }\n      this.rolesText = this.updatedUser.roles.map(role => {\n        return role.displayName;\n      });\n      this.rolesText = this.rolesText.join(\", \");\n    }\n  }\n};","map":{"version":3,"names":["axios","mapGetters","data","firstName","lastName","email","telNumber","password","rolesText","computed","showUserAddForm","updatedUser","updatedUserIndex","roles","methods","unShowAddUserForm","userFormContainer","$refs","className","setTimeout","$store","commit","addUser","emailPattern","telPattern","error","length","test","userDto","response","post","withCredentials","console","log","dispatch","mounted","first_name","last_name","tel_number","map","role","displayName","join"],"sources":["src/Users-Frontend/Components/AddUpdateUserForm.vue"],"sourcesContent":["<template>\r\n  <div\r\n    ref=\"userFormContainer\"\r\n    :class=\"\r\n      showUserAddForm\r\n        ? 'user-form-container-show'\r\n        : 'user-form-container-unshow'\r\n    \"\r\n  >\r\n    <div class=\"user-form\">\r\n      <i @click=\"unShowAddUserForm\" class=\"material-icons\"> login </i>\r\n      <div class=\"user-form-header\">\r\n        <h1>Create User</h1>\r\n      </div>\r\n      <div>\r\n        <div class=\"user-form-login-data-input-container\">\r\n          <div>\r\n            <p>First Name</p>\r\n            <input v-model=\"firstName\" type=\"text\" />\r\n          </div>\r\n          <div>\r\n            <p>Last Name</p>\r\n            <input v-model=\"lastName\" type=\"text\" />\r\n          </div>\r\n          <div>\r\n            <p>Email</p>\r\n            <input v-model=\"email\" type=\"text\" />\r\n          </div>\r\n          <div>\r\n            <p>Telephone</p>\r\n            <input v-model=\"telNumber\" type=\"tel\" />\r\n          </div>\r\n          <div v-if=\"updatedUser == null\">\r\n            <p>Password</p>\r\n            <input v-model=\"password\" type=\"password\" />\r\n          </div>\r\n\r\n          <div v-if=\"updatedUser != null\">\r\n            <p>Roles: Admin kreten kripl kokot</p>\r\n          </div>\r\n\r\n          <div v-if=\"updatedUser != null\">\r\n            <select>\r\n              <option>KOKOT</option>\r\n            </select>\r\n\r\n            <div>\r\n              <button>Add</button>\r\n              <button>Remove</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"user-form-create-button\">\r\n          <button @click=\"addUser\">\r\n            {{ updatedUser != null ? \"Update user\" : \"Create role\" }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      firstName: \"\",\r\n      lastName: \"\",\r\n      email: \"\",\r\n      telNumber: \"\",\r\n      password: \"\",\r\n      rolesText: \"\",\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters({\r\n      showUserAddForm: \"showUserAddForm\",\r\n      updatedUser: \"updatedUser\",\r\n      updatedUserIndex: \"updatedUserIndex\",\r\n      roles: \"roles\",\r\n    }),\r\n  },\r\n\r\n  methods: {\r\n    unShowAddUserForm() {\r\n      const userFormContainer = this.$refs.userFormContainer;\r\n\r\n      // Remove all classes from the element\r\n      userFormContainer.className = \"user-form-container-unshow\";\r\n\r\n      // After a delay of 1.25 seconds, toggle the Vuex state to false\r\n      setTimeout(() => {\r\n        this.$store.commit(\"toggleUserAddForm\", false);\r\n        this.$store.commit(\"setUpdatedUser\", null);\r\n        this.$store.commit(\"setUpdatedUserIndex\", null);\r\n      }, 1250);\r\n    },\r\n\r\n    async addUser() {\r\n      const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      const telPattern = /^\\d{10}$/;\r\n\r\n      let error = \"\";\r\n\r\n      switch (true) {\r\n        case this.firstName.length === 0:\r\n        case this.lastName.length === 0:\r\n        case this.email.length === 0:\r\n        case this.telNumber.length === 0:\r\n        case this.password.length === 0:\r\n          error = \"Please fill all fields in the form\";\r\n          break;\r\n\r\n        case !emailPattern.test(this.email):\r\n          error = \"Please enter a valid email address\";\r\n          break;\r\n\r\n        case !telPattern.test(this.telNumber):\r\n          error = \"Please enter a valid telephone number\";\r\n          break;\r\n\r\n        case this.password.length < 8:\r\n          error = \"Password should be at least 8 characters long\";\r\n          break;\r\n      }\r\n\r\n      if (error) {\r\n        this.$store.commit(\"showModal\", error);\r\n        return;\r\n      }\r\n\r\n      const userDto = {\r\n        firstName: this.firstName,\r\n        lastName: this.lastName,\r\n        email: this.email,\r\n        telNumber: this.telNumber,\r\n        password: this.password,\r\n      };\r\n\r\n      try {\r\n        const response = await axios.post(\r\n          \"http://localhost:5000/user/user-create\",\r\n          userDto,\r\n          {\r\n            withCredentials: true,\r\n          }\r\n        );\r\n        console.log(response.data);\r\n\r\n        if (response.data.error) {\r\n          this.$store.commit(\"showModal\", response.data.error);\r\n          return;\r\n        }\r\n        this.unShowAddUserForm();\r\n        this.$store.dispatch(\"openInfoPopUp\", \"User created\");\r\n        this.$store.commit(\"addUser\", response.data);\r\n      } catch (error) {\r\n        console.log(error);\r\n\r\n        this.$store.commit(\r\n          \"showModal\",\r\n          \"Something went wrong we are working on the repair\"\r\n        );\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    if (this.updatedUser != null) {\r\n      this.firstName = this.updatedUser.first_name;\r\n      this.lastName = this.updatedUser.last_name;\r\n      this.email = this.updatedUser.email;\r\n      this.telNumber = this.updatedUser.tel_number;\r\n      if (this.roles.length === 0) {\r\n        this.$store.dispatch(\"getRoles\");\r\n      }\r\n\r\n      this.rolesText = this.updatedUser.roles.map((role) => {\r\n        return role.displayName;\r\n      });\r\n\r\n      this.rolesText = this.rolesText.join(\", \");\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.user-form-container-show {\r\n  padding-top: 30px;\r\n  width: 400px;\r\n  height: 100vh;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  background-color: #2c3968;\r\n  i {\r\n    position: absolute;\r\n    color: whitesmoke;\r\n    top: 10px;\r\n    left: 10px;\r\n    font-size: 2rem;\r\n    transition: 0.2s;\r\n    cursor: pointer;\r\n  }\r\n\r\n  animation: slideIn 1s ease-out forwards;\r\n}\r\n\r\n.user-form-container-unshow {\r\n  padding-top: 30px;\r\n  width: 400px;\r\n  height: 100vh;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  background-color: #2c3968;\r\n  i {\r\n    position: absolute;\r\n    color: whitesmoke;\r\n    top: 10px;\r\n    left: 10px;\r\n    font-size: 2rem;\r\n    transition: 0.2s;\r\n    cursor: pointer;\r\n  }\r\n\r\n  animation: slideOut 1s ease-out forwards;\r\n}\r\n\r\n.user-form-header {\r\n  height: 50px;\r\n  text-align: center;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: whitesmoke;\r\n  letter-spacing: 2px;\r\n}\r\n\r\n.user-form-login-data-input-container {\r\n  width: 100%;\r\n  height: 800px;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n\r\n  div {\r\n    height: 170px;\r\n    display: flex;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n\r\n    div {\r\n      display: flex;\r\n      flex-direction: row;\r\n      width: 80%;\r\n      height: 50px;\r\n\r\n      button {\r\n        width: 120px;\r\n        height: 25px;\r\n        background-color: whitesmoke;\r\n        border: none;\r\n        border-radius: 4px;\r\n        margin: 0 10px;\r\n        font-size: 1rem;\r\n        cursor: pointer;\r\n        transition: 0.2s;\r\n      }\r\n    }\r\n\r\n    input {\r\n      height: 30px;\r\n      width: 250px;\r\n      padding: 5px;\r\n      border-radius: 4px;\r\n      font-size: 14px;\r\n      outline: none;\r\n      transition: box-shadow 0.2s;\r\n    }\r\n\r\n    select {\r\n      height: 30px;\r\n      width: 250px;\r\n      padding: 5px;\r\n      border-radius: 4px;\r\n      font-size: 14px;\r\n      outline: none;\r\n      transition: box-shadow 0.2s;\r\n    }\r\n\r\n    input:focus {\r\n      box-shadow: 0 0 5px 3px rgba(50, 50, 93, 0.5),\r\n        0 0 8px 5px rgba(0, 0, 0, 0.3);\r\n    }\r\n\r\n    p {\r\n      font-size: 1.25rem;\r\n      text-align: center;\r\n      color: whitesmoke;\r\n      letter-spacing: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n.user-form-create-button {\r\n  width: 100%;\r\n  height: 70px;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  justify-content: space-evenly;\r\n\r\n  button {\r\n    width: 200px;\r\n    height: 40px;\r\n    background-color: whitesmoke;\r\n    border: none;\r\n    border-radius: 4px;\r\n    font-size: 1.25rem;\r\n    cursor: pointer;\r\n    transition: 0.2s;\r\n  }\r\n\r\n  button:hover {\r\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,\r\n      rgba(0, 0, 0, 0.22) 0px 15px 12px;\r\n  }\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateY(-100%);\r\n  }\r\n  to {\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n@keyframes slideOut {\r\n  from {\r\n    transform: translateY(0);\r\n  }\r\n  to {\r\n    transform: translateY(-100%);\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"AAgEA,OAAAA,KAAA;AACA,SAAAC,UAAA;AAEA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,QAAA;MACAC,KAAA;MACAC,SAAA;MACAC,QAAA;MACAC,SAAA;IACA;EACA;EAEAC,QAAA;IACA,GAAAR,UAAA;MACAS,eAAA;MACAC,WAAA;MACAC,gBAAA;MACAC,KAAA;IACA;EACA;EAEAC,OAAA;IACAC,kBAAA;MACA,MAAAC,iBAAA,QAAAC,KAAA,CAAAD,iBAAA;;MAEA;MACAA,iBAAA,CAAAE,SAAA;;MAEA;MACAC,UAAA;QACA,KAAAC,MAAA,CAAAC,MAAA;QACA,KAAAD,MAAA,CAAAC,MAAA;QACA,KAAAD,MAAA,CAAAC,MAAA;MACA;IACA;IAEA,MAAAC,QAAA;MACA,MAAAC,YAAA;MACA,MAAAC,UAAA;MAEA,IAAAC,KAAA;MAEA;QACA,UAAAtB,SAAA,CAAAuB,MAAA;QACA,UAAAtB,QAAA,CAAAsB,MAAA;QACA,UAAArB,KAAA,CAAAqB,MAAA;QACA,UAAApB,SAAA,CAAAoB,MAAA;QACA,UAAAnB,QAAA,CAAAmB,MAAA;UACAD,KAAA;UACA;QAEA,MAAAF,YAAA,CAAAI,IAAA,MAAAtB,KAAA;UACAoB,KAAA;UACA;QAEA,MAAAD,UAAA,CAAAG,IAAA,MAAArB,SAAA;UACAmB,KAAA;UACA;QAEA,UAAAlB,QAAA,CAAAmB,MAAA;UACAD,KAAA;UACA;MACA;MAEA,IAAAA,KAAA;QACA,KAAAL,MAAA,CAAAC,MAAA,cAAAI,KAAA;QACA;MACA;MAEA,MAAAG,OAAA;QACAzB,SAAA,OAAAA,SAAA;QACAC,QAAA,OAAAA,QAAA;QACAC,KAAA,OAAAA,KAAA;QACAC,SAAA,OAAAA,SAAA;QACAC,QAAA,OAAAA;MACA;MAEA;QACA,MAAAsB,QAAA,SAAA7B,KAAA,CAAA8B,IAAA,CACA,0CACAF,OAAA,EACA;UACAG,eAAA;QACA,CACA;QACAC,OAAA,CAAAC,GAAA,CAAAJ,QAAA,CAAA3B,IAAA;QAEA,IAAA2B,QAAA,CAAA3B,IAAA,CAAAuB,KAAA;UACA,KAAAL,MAAA,CAAAC,MAAA,cAAAQ,QAAA,CAAA3B,IAAA,CAAAuB,KAAA;UACA;QACA;QACA,KAAAV,iBAAA;QACA,KAAAK,MAAA,CAAAc,QAAA;QACA,KAAAd,MAAA,CAAAC,MAAA,YAAAQ,QAAA,CAAA3B,IAAA;MACA,SAAAuB,KAAA;QACAO,OAAA,CAAAC,GAAA,CAAAR,KAAA;QAEA,KAAAL,MAAA,CAAAC,MAAA,CACA,aACA,mDACA;MACA;IACA;EACA;EAEAc,QAAA;IACA,SAAAxB,WAAA;MACA,KAAAR,SAAA,QAAAQ,WAAA,CAAAyB,UAAA;MACA,KAAAhC,QAAA,QAAAO,WAAA,CAAA0B,SAAA;MACA,KAAAhC,KAAA,QAAAM,WAAA,CAAAN,KAAA;MACA,KAAAC,SAAA,QAAAK,WAAA,CAAA2B,UAAA;MACA,SAAAzB,KAAA,CAAAa,MAAA;QACA,KAAAN,MAAA,CAAAc,QAAA;MACA;MAEA,KAAA1B,SAAA,QAAAG,WAAA,CAAAE,KAAA,CAAA0B,GAAA,CAAAC,IAAA;QACA,OAAAA,IAAA,CAAAC,WAAA;MACA;MAEA,KAAAjC,SAAA,QAAAA,SAAA,CAAAkC,IAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}